# vim ft=yaml

# After changing this file, check it on:
#   http://yaml-online-parser.appspot.com/

# See tools/travis/notes.txt for some guidelines

language: python
sudo: required
# Defaullt is 2.7
python: 3.5
services: docker


matrix:
  exclude:
    # Exclude the default Python 3.5 build
    - python: 3.5
  include:
    - os: linux
      env:
        - PLAT=i686
        - MB_PYTHON_VERSION=3.6
env:
  global:
    - REPO_DIR="."
    - PLAT=x86_64
    - UNICODE_WIDTH=32
    - NP_BUILD_DEP="numpy==1.11.3"
    - NP_TEST_DEP="numpy==1.11.3"
    - GEN_DEPS="matplotlib networkx scipy pillow"
    - MANYLINUX_URL=https://5cf40426d9f06eb7461d-6fe47d9331aba7cd62fc36c7196769e4.ssl.cf2.rackcdn.com

before_install:
  - git submodule add https://github.com/matthew-brett/multibuild multibuild
  - git commit -m 'added multibuild for 32 bit linux testing'
  - BUILD_DEPENDS="$NP_BUILD_DEP Cython scipy"
  - TEST_DEPENDS="$NP_TEST_DEP nose pytest $GEN_DEPS"
  - source multibuild/common_utils.sh
  - source multibuild/travis_steps.sh
  - before_install

install:
  - build_wheel $REPO_DIR $PLAT

script:
  - install_run $PLAT

